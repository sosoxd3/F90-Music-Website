<!doctype html>
<html lang="ar" dir="rtl" data-theme="neon">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#05070F">
  <title>اف تسعين للإنتاج الفني | F90 Music</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="bgFX"></div>

  <!-- Topbar -->
  <header class="topbar">
    <div class="wrap">
      <div class="brand" id="goHome" role="button" tabindex="0">
        <div class="logo">F90</div>
        <div class="brandTxt">
          <div class="brandTitle">اف تسعين للإنتاج الفني</div>
          <div class="brandSub">F90 Music — Official</div>
        </div>
      </div>

      <div class="topActions">
        <button class="btn pill mobileOnly" id="drawerBtn" type="button" aria-label="menu">☰</button>
        <button class="btn pill" id="themeBtn" type="button">ثيم</button>
        <button class="btn pill" id="motionBtn" type="button">حركة</button>
        <a class="btn primary" data-link="youtube" target="_blank" rel="noopener">قناة يوتيوب</a>
      </div>
    </div>
  </header>

  <!-- Drawer Overlay + Drawer (مهم: بدون open هنا نهائيًا) -->
  <div class="drawerOverlay" id="drawerOverlay"></div>

  <aside class="drawer" id="drawer" aria-label="القائمة الجانبية">
    <div class="sideTop">
      <div class="pill">القائمة</div>
      <button class="btn pill" id="closeDrawer" type="button" aria-label="إغلاق">✕</button>
    </div>

    <nav class="sideNav">
      <a href="#/home">الرئيسية</a>
      <a href="#/all">كل الأغاني</a>
      <a href="#/rap">الراب</a>
      <a href="#/sad">رومنسي/حزين/طربي</a>
      <a href="#/live">لايف</a>
    </nav>

    <div class="sideCard">
      <div class="sideCardTitle">تواصل</div>
      <div class="sideLinks">
        <a class="btn" data-link="tiktok" target="_blank" rel="noopener">TikTok</a>
        <a class="btn" data-link="insta" target="_blank" rel="noopener">Instagram</a>
        <a class="btn primary" data-link="whatsapp" target="_blank" rel="noopener">WhatsApp</a>
        <a class="btn" data-link="email">Email</a>
      </div>
    </div>

    <div class="sideFoot">
      <div class="small">© <span id="yearM"></span> F90</div>
    </div>
  </aside>

  <main class="wrap app">
    <!-- Desktop Sidebar -->
    <aside class="sidebar">
      <div class="sideTop">
        <div class="pill">F90</div>
        <div class="small" id="statsMini">—</div>
      </div>

      <nav class="sideNav">
        <a href="#/home">الرئيسية</a>
        <a href="#/all">كل الأغاني</a>
        <a href="#/rap">الراب</a>
        <a href="#/sad">رومنسي/حزين/طربي</a>
        <a href="#/live">لايف</a>
      </nav>

      <div class="sideCard">
        <div class="sideCardTitle">روابط رسمية</div>
        <div class="sideLinks">
          <a class="btn primary" data-link="youtube" target="_blank" rel="noopener">اشترك بالقناة</a>
          <a class="btn" data-link="tiktok" target="_blank" rel="noopener">TikTok</a>
          <a class="btn" data-link="insta" target="_blank" rel="noopener">Instagram</a>
        </div>
        <div class="hr"></div>
        <div class="sideCardTitle">طلب أغنية</div>
        <div class="sideLinks">
          <a class="btn primary" data-link="whatsapp" target="_blank" rel="noopener">WhatsApp</a>
          <a class="btn" data-link="email">Email</a>
        </div>
      </div>

      <div class="sideFoot">
        <div class="small">حقوق الطبع والنشر محفوظة © <span id="year"></span> F90</div>
      </div>
    </aside>

    <!-- Main -->
    <section class="main">
      <div class="viewHeader">
        <div class="vhLeft">
          <div class="pill" id="viewPill">F90</div>
          <h1 class="vhTitle" id="viewTitle">الرئيسية</h1>
          <div class="small" id="viewSubtitle">—</div>
        </div>
        <div class="vhRight">
          <button class="btn" id="refreshBtn" type="button">تحديث</button>
          <button class="btn" id="shareBtn" type="button">نسخ رابط</button>
        </div>
      </div>

      <!-- Hero -->
      <section class="hero" id="hero">
        <div class="heroInner">
          <div class="pill">F90 • Music</div>
          <h2 class="heroTitle">موقع أغاني احترافي وتشغيل ثابت</h2>
          <p class="heroDesc">كل الأغاني الجديدة تظهر تلقائياً، وتصنيف منظم، وتحكم كامل من الشريط السفلي.</p>

          <div class="heroBtns">
            <button class="btn primary" data-navto="#/all" type="button">كل الأغاني</button>
            <button class="btn" data-navto="#/rap" type="button">الراب</button>
            <button class="btn" data-navto="#/sad" type="button">رومنسي/حزين/طربي</button>
            <button class="btn pill" data-navto="#/live" type="button">لايف</button>
          </div>

          <div class="eq" aria-hidden="true">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div>
            <div class="bar"></div><div class="bar"></div><div class="bar"></div>
          </div>

          <div class="heroStats">
            <div class="stat">
              <div class="statNum" id="totalTracks">—</div>
              <div class="statLbl">عدد الأغاني</div>
            </div>
            <div class="stat">
              <div class="statNum" id="latestTrack">—</div>
              <div class="statLbl">آخر إصدار</div>
            </div>
            <div class="stat">
              <div class="statNum" id="liveState">—</div>
              <div class="statLbl">لايف</div>
            </div>
          </div>

          <div class="small" id="homeStatus"></div>
        </div>
      </section>

      <!-- Toolbar -->
      <section class="toolbar" id="toolbar">
        <input class="input" id="searchInput" placeholder="ابحث باسم الأغنية..." />
        <select class="select" id="sortSelect">
          <option value="date_desc">الأحدث</option>
          <option value="date_asc">الأقدم</option>
          <option value="views_desc">الأكثر مشاهدة</option>
          <option value="title_asc">A-Z</option>
        </select>
      </section>

      <!-- Grid -->
      <section class="grid" id="grid"></section>

      <!-- Song page -->
      <section class="panel" id="panelSong">
        <div class="panelHead">
          <div>
            <div class="pill">الأغنية</div>
            <div class="panelTitle" id="songTitle">—</div>
            <div class="small" id="songMeta">—</div>
          </div>
          <div class="panelBtns">
            <a class="btn primary" id="ytBtn" target="_blank" rel="noopener">فتح على يوتيوب</a>
          </div>
        </div>

        <div class="playerWrap bigPlayer">
          <div id="playerBig"></div>
        </div>
      </section>

      <footer class="foot">
        <div class="small">حقوق الطبع والنشر محفوظة © <span id="yearF"></span> F90</div>
      </footer>
    </section>
  </main>

  <!-- Hidden mini player -->
  <div class="hiddenPlayer">
    <div id="playerMini"></div>
  </div>

  <!-- Fixed Mini Player Bar -->
  <section class="mini" id="mini">
    <div class="miniLeft">
      <div class="miniTitle" id="miniTitle">—</div>
      <div class="miniMeta" id="miniMeta">—</div>
    </div>

    <div class="miniBtns">
      <button class="btn pill" id="prevBtn" type="button" title="السابق">⟵</button>
      <button class="btn primary pill" id="playBtn" type="button" title="تشغيل/إيقاف">▶</button>
      <button class="btn pill" id="nextBtn" type="button" title="التالي">⟶</button>
    </div>
  </section>

  <!-- Main JS -->
  <script src="app.js"></script>

  <!-- Drawer Patch (مضمون: يقفل/يفتح حتى لو CSS/JS متعارض) -->
  <script>
  (function(){
    const drawer = document.getElementById("drawer") || document.querySelector(".drawer");
    const overlay = document.getElementById("drawerOverlay") || document.querySelector(".drawerOverlay");
    const btn = document.getElementById("drawerBtn") || document.querySelector("button[aria-label='menu']");
    const closeBtn = document.getElementById("closeDrawer");

    if(!drawer || !overlay) return;

    // Ensure on top + clickable
    drawer.style.zIndex = "99999";
    overlay.style.zIndex = "99998";

    overlay.style.position = "fixed";
    overlay.style.inset = "0";
    overlay.style.background = "rgba(0,0,0,.55)";
    overlay.style.backdropFilter = "blur(4px)";
    overlay.style.transition = "opacity .15s ease";

    drawer.style.position = "fixed";
    drawer.style.top = "0";
    drawer.style.bottom = "0";
    drawer.style.insetInlineEnd = "0";
    drawer.style.width = drawer.style.width || "330px";
    drawer.style.maxWidth = drawer.style.maxWidth || "86vw";
    drawer.style.transition = "transform .15s ease";

    function close(){
      drawer.classList.remove("open");
      overlay.classList.remove("open");
      drawer.style.transform = "translateX(105%)";
      drawer.style.visibility = "hidden";
      drawer.style.pointerEvents = "none";
      overlay.style.opacity = "0";
      overlay.style.pointerEvents = "none";
    }

    function open(){
      drawer.classList.add("open");
      overlay.classList.add("open");
      drawer.style.transform = "translateX(0)";
      drawer.style.visibility = "visible";
      drawer.style.pointerEvents = "auto";
      overlay.style.opacity = "1";
      overlay.style.pointerEvents = "auto";
    }

    // Close immediately on load
    close();

    const onOpen = (e)=>{ e.preventDefault(); e.stopPropagation(); open(); };
    const onClose = (e)=>{ e.preventDefault(); e.stopPropagation(); close(); };

    if(btn){
      btn.addEventListener("pointerdown", onOpen, true);
      btn.addEventListener("click", onOpen, true);
      btn.addEventListener("touchstart", onOpen, {passive:false, capture:true});
    }
    if(closeBtn){
      closeBtn.addEventListener("pointerdown", onClose, true);
      closeBtn.addEventListener("click", onClose, true);
      closeBtn.addEventListener("touchstart", onClose, {passive:false, capture:true});
    }

    overlay.addEventListener("pointerdown", onClose, true);
    overlay.addEventListener("click", onClose, true);
    overlay.addEventListener("touchstart", onClose, {passive:false, capture:true});

    drawer.addEventListener("pointerdown", (e)=>{
      if(e.target.closest("a")) close();
    }, true);

    window.addEventListener("hashchange", close);
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") close(); });

    document.addEventListener("pointerdown", (e)=>{
      if(overlay.style.pointerEvents !== "auto") return;
      if(e.target.closest("#drawer")) return;
      if(btn && e.target.closest("#drawerBtn")) return;
      close();
    }, true);
  })();
  </script>
</body>
</html>
```0
