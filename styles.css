/* =========================
   F90 MUSIC - FINAL UI v7
   ========================= */

/* ---- Theme palette (7) ---- */
:root{
  --bg:#05070F;
  --panel:rgba(10,14,30,.86);
  --txt:#EAF0FF;
  --muted:rgba(234,240,255,.65);
  --br:rgba(255,255,255,.10);
  --shadow:0 10px 35px rgba(0,0,0,.55);
  --r:18px;
  --miniH:92px;

  --acc:#7C5CFF;
  --acc2:#21D4FD;
  --glow:rgba(124,92,255,.35);
  --gridLine: rgba(255,255,255,.04);
}

/* ---- Themes ---- */
html[data-theme="neon"]  { --acc:#7C5CFF; --acc2:#21D4FD; --glow:rgba(124,92,255,.35); }
html[data-theme="cyan"]  { --acc:#00E5FF; --acc2:#00FFA3; --glow:rgba(0,229,255,.30); }
html[data-theme="purple"]{ --acc:#B24BFF; --acc2:#FF4BD8; --glow:rgba(178,75,255,.28); }
html[data-theme="gold"]  { --acc:#FFB800; --acc2:#FF5C00; --glow:rgba(255,184,0,.22); }
html[data-theme="red"]   { --acc:#FF2A6D; --acc2:#FFB000; --glow:rgba(255,42,109,.22); }
html[data-theme="green"] { --acc:#00FFA3; --acc2:#2DFF5C; --glow:rgba(0,255,163,.20); }
html[data-theme="mono"]  { --acc:#EAF0FF; --acc2:#AAB3D1; --glow:rgba(234,240,255,.12); }

/* ---- Mode: light/dark ---- */
html[data-mode="dark"]{
  --bg:#05070F;
  --panel:rgba(10,14,30,.86);
  --txt:#EAF0FF;
  --muted:rgba(234,240,255,.65);
  --br:rgba(255,255,255,.10);
  --shadow:0 10px 35px rgba(0,0,0,.55);
  --gridLine: rgba(255,255,255,.04);
}
html[data-mode="light"]{
  --bg:#F6F7FB;
  --panel:rgba(255,255,255,.85);
  --txt:#0E1222;
  --muted:rgba(14,18,34,.62);
  --br:rgba(14,18,34,.10);
  --shadow:0 12px 30px rgba(10,12,18,.14);
  --gridLine: rgba(10,12,18,.06);
}

/* ---- High contrast ---- */
html[data-contrast="high"]{
  --br: rgba(255,255,255,.22);
}
html[data-mode="light"][data-contrast="high"]{
  --br: rgba(14,18,34,.22);
}
html[data-contrast="high"] .btn,
html[data-contrast="high"] .item,
html[data-contrast="high"] .sidebar,
html[data-contrast="high"] .songCard{
  border-color: var(--br) !important;
}

/* ---- Motion off ---- */
html[data-motion="off"] *{ animation:none !important; transition:none !important; }

/* base */
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; background:var(--bg); color:var(--txt); font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial; }
a{ color:inherit; text-decoration:none; }
button,input,select,textarea{ font:inherit; }
.wrap{ width:min(1200px, 92vw); margin:0 auto; }
.small{ color:var(--muted); font-size:12px; }

/* background grid + glow */
.bgFX{
  position:fixed; inset:0; pointer-events:none; z-index:-1;
  background:
    radial-gradient(900px 500px at 20% 10%, var(--glow), transparent 60%),
    radial-gradient(700px 420px at 80% 20%, rgba(33,212,253,.10), transparent 60%),
    linear-gradient(transparent 0, transparent 100%),
    repeating-linear-gradient(0deg, var(--gridLine) 0, var(--gridLine) 1px, transparent 1px, transparent 56px),
    repeating-linear-gradient(90deg, var(--gridLine) 0, var(--gridLine) 1px, transparent 1px, transparent 56px);
  filter:saturate(1.05);
  opacity:.95;
}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:50;
  background: color-mix(in srgb, var(--bg) 86%, transparent);
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--br);
}
.topbarInner{ display:flex; align-items:center; justify-content:space-between; padding:12px 0; gap:10px; }

.brand{ display:flex; align-items:center; gap:10px; cursor:pointer; }
.logoWrap{ position:relative; width:46px; height:46px; }
.logo{
  width:46px; height:46px; border-radius:16px; display:grid; place-items:center;
  background:rgba(255,255,255,.06);
  border:1px solid var(--br); font-weight:900;
  box-shadow:0 0 0 1px rgba(255,255,255,.05) inset;
}
html[data-mode="light"] .logo{ background:rgba(14,18,34,.04); }

.headphones{
  position:absolute; inset:-3px;
  border-radius:18px;
  border:2px solid transparent;
  background:
    radial-gradient(12px 12px at 15% 60%, rgba(255,255,255,.14), transparent 60%),
    radial-gradient(12px 12px at 85% 60%, rgba(255,255,255,.14), transparent 60%);
  box-shadow: 0 0 22px var(--glow);
  animation: hpPulse 1.4s ease-in-out infinite;
}
@keyframes hpPulse{
  0%,100%{ transform:scale(1); opacity:.82 }
  50%{ transform:scale(1.05); opacity:1 }
}

.brandTitle{ font-weight:900; }
.brandSub{ color:var(--muted); font-size:12px; margin-top:2px; }
.topActions{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

/* Buttons */
.btn{
  border:1px solid var(--br);
  background:rgba(255,255,255,.04);
  color:var(--txt);
  padding:10px 12px;
  border-radius:14px;
  cursor:pointer;
}
html[data-mode="light"] .btn{ background:rgba(14,18,34,.03); }
.btn:hover{ background:rgba(255,255,255,.06); }
.btn.primary{
  border-color: color-mix(in srgb, var(--br) 60%, transparent);
  background:linear-gradient(135deg, color-mix(in srgb, var(--acc) 18%, transparent), rgba(255,255,255,.05));
  box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset, 0 10px 25px rgba(0,0,0,.16);
}
.pill{ border-radius:999px !important; padding-inline:14px; }
.btn.active{
  box-shadow:0 0 22px var(--glow);
  border-color: color-mix(in srgb, var(--acc) 55%, var(--br));
}

/* Layout */
.app{ display:grid; grid-template-columns: 320px 1fr; gap:16px; padding:18px 0 calc(var(--miniH) + 22px); }
.sidebar{
  background:var(--panel); border:1px solid var(--br); border-radius:var(--r);
  padding:14px; box-shadow:var(--shadow); height:fit-content; position:sticky; top:78px;
}
.sideTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px; }
.sideNav{ display:grid; gap:8px; margin:10px 0; }
.sideNav a{
  padding:10px 12px; border-radius:14px; border:1px solid var(--br);
  background:rgba(255,255,255,.03);
}
html[data-mode="light"] .sideNav a{ background:rgba(14,18,34,.03); }
.sideNav a:hover{ background:rgba(255,255,255,.06); border-color:color-mix(in srgb, var(--br) 70%, transparent); }
.sideCard{
  margin-top:12px; padding:12px; border:1px solid var(--br); border-radius:var(--r);
  background:rgba(255,255,255,.03);
}
html[data-mode="light"] .sideCard{ background:rgba(14,18,34,.03); }
.sideCardTitle{ font-weight:900; margin-bottom:10px; }
.sideLinks{ display:flex; flex-wrap:wrap; gap:8px; }
.hr{ height:1px; background:var(--br); margin:12px 0; }
.sideFoot{ margin-top:12px; color:var(--muted); font-size:12px; }

.viewHeader{ display:flex; align-items:flex-start; justify-content:space-between; gap:12px; margin-bottom:12px; }
.vhTitle{ margin:6px 0 0; font-size:28px; }

/* Back Button */
.backBtn{
  display:none;
  position:sticky;
  top:74px;
  z-index:20;
  margin:8px 0 10px;
  width:fit-content;
  border:1px solid var(--br);
  background:rgba(255,255,255,.04);
  color:var(--txt);
  padding:10px 14px;
  border-radius:999px;
  cursor:pointer;
}
html[data-mode="light"] .backBtn{ background:rgba(14,18,34,.03); }
.backBtn.show{ display:inline-flex; align-items:center; gap:8px; }
.backBtn.showAlways{ display:inline-flex; }

/* Home Pro */
.homePro{ display:block; }
.heroPro{
  position:relative;
  border:1px solid var(--br);
  border-radius:var(--r);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  box-shadow:var(--shadow);
  overflow:hidden;
}
.heroGlow{
  position:absolute; inset:-40%;
  background:
    radial-gradient(closest-side at 30% 30%, var(--glow), transparent 60%),
    radial-gradient(closest-side at 70% 40%, color-mix(in srgb, var(--acc2) 20%, transparent), transparent 60%);
  filter:blur(18px);
  opacity:.9;
  animation: glowDrift 5s ease-in-out infinite;
}
@keyframes glowDrift{
  0%,100%{ transform:translate3d(0,0,0) }
  50%{ transform:translate3d(30px,-12px,0) }
}
.heroProInner{ position:relative; padding:16px; }
.heroTitle{ margin:10px 0 6px; font-size:24px; }
.heroDesc{ margin:0 0 14px; color:var(--muted); }
.heroBtns{ display:flex; flex-wrap:wrap; gap:8px; }

.heroStats{ display:grid; grid-template-columns: repeat(3,1fr); gap:10px; margin-top:14px; }
.stat{ padding:10px; border:1px solid var(--br); border-radius:var(--r); background:rgba(0,0,0,.10); }
html[data-mode="light"] .stat{ background:rgba(14,18,34,.03); }
.statNum{ font-size:18px; font-weight:900; }
.statLbl{ color:var(--muted); font-size:12px; margin-top:4px; }

.eqPro{ display:flex; gap:6px; margin-top:14px; align-items:flex-end; height:22px; }
.eqPro span{
  width:8px; border-radius:999px;
  background:linear-gradient(180deg, var(--acc), rgba(255,255,255,.12));
  opacity:.9;
  animation:eqMove 1.2s ease-in-out infinite;
}
.eqPro span:nth-child(2){ animation-delay:.1s }
.eqPro span:nth-child(3){ animation-delay:.2s }
.eqPro span:nth-child(4){ animation-delay:.3s }
.eqPro span:nth-child(5){ animation-delay:.4s }
.eqPro span:nth-child(6){ animation-delay:.5s }
.eqPro span:nth-child(7){ animation-delay:.6s }
@keyframes eqMove{
  0%,100%{ height:6px }
  50%{ height:22px }
}

.sectionHead{ margin:16px 0 10px; display:flex; align-items:flex-end; justify-content:space-between; gap:10px; }
.sectionHead h3{ margin:0; font-size:18px; }

/* Horizontal scroll rows (home) */
.rowScroll{
  display:flex;
  gap:12px;
  overflow:auto;
  padding-bottom:6px;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling: touch;
}
.rowScroll::-webkit-scrollbar{ height:8px; }
.rowScroll::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.12); border-radius:999px; }

.hCard{
  min-width: 220px;
  max-width: 260px;
  scroll-snap-align: start;
  cursor:pointer;
  border:1px solid var(--br);
  border-radius:var(--r);
  overflow:hidden;
  background:rgba(255,255,255,.03);
  box-shadow:var(--shadow);
}
html[data-mode="light"] .hCard{ background:rgba(14,18,34,.03); }
.hThumb{ width:100%; aspect-ratio:16/9; object-fit:cover; display:block; }
.hBody{ padding:10px; }
.hTitle{ margin:0; font-weight:900; font-size:13px; line-height:1.4; }
.hMeta{ margin-top:6px; color:var(--muted); font-size:12px; display:flex; gap:8px; flex-wrap:wrap; }
.badge{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px;
  border:1px solid var(--br);
  background:rgba(0,0,0,.10);
  color:var(--txt);
  font-size:12px;
}

/* Toolbar + Grid */
.toolbar{ display:flex; gap:10px; margin:14px 0; }
.input, .select, .textarea{
  width:100%;
  border:1px solid var(--br);
  background:rgba(255,255,255,.03);
  color:var(--txt);
  padding:12px 12px;
  border-radius:14px;
  outline:none;
}
html[data-mode="light"] .input,
html[data-mode="light"] .select,
html[data-mode="light"] .textarea{ background:rgba(14,18,34,.03); }
.textarea{ min-height:90px; resize:vertical; }
.select{ width:220px; }

.grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
.item{ cursor:pointer; border:1px solid var(--br); border-radius:var(--r); overflow:hidden; background:rgba(255,255,255,.03); box-shadow:var(--shadow); }
html[data-mode="light"] .item{ background:rgba(14,18,34,.03); }
.thumb{ width:100%; display:block; aspect-ratio:16/9; object-fit:cover; }
.itemBody{ padding:10px; }
.itemTitle{ margin:0; font-weight:900; line-height:1.35; }
.itemMeta{ margin:8px 0 0; color:var(--muted); font-size:12px; }
.foot{ margin-top:18px; padding:10px 0; }

/* Mini Player */
.mini{
  position:fixed; left:0; right:0; bottom:0;
  height:var(--miniH);
  z-index:60;
  background: color-mix(in srgb, var(--bg) 86%, transparent);
  backdrop-filter: blur(12px);
  border-top:1px solid var(--br);
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px;
  gap:10px;
}
.miniLeft{ min-width:0; }
.miniTitle{ font-weight:900; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.miniMeta{ color:var(--muted); font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.miniSub{
  display:flex; gap:10px; align-items:center; margin-top:6px;
}
.vol{
  width:150px; max-width:38vw;
  accent-color: var(--acc);
}
.miniChip{
  border:1px solid var(--br);
  background:rgba(255,255,255,.03);
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
  color:var(--muted);
}
.miniBtns{ display:flex; gap:8px; align-items:center; }

/* Drawer */
.drawerOverlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.55);
  opacity:0; pointer-events:none;
  transition:opacity .15s ease;
  z-index:9998;
}
.drawer{
  position:fixed; top:0; bottom:0; right:0;
  width:330px; max-width:86vw;
  background:var(--panel);
  border-left:1px solid var(--br);
  box-shadow:var(--shadow);
  transform:translateX(110%);
  transition:transform .15s ease;
  z-index:9999;
  padding:14px;
  visibility:hidden;
  pointer-events:none;
}
.drawer.open{ transform:translateX(0); visibility:visible; pointer-events:auto; }
.drawerOverlay.open{ opacity:1; pointer-events:auto; }

/* Theme modal (top sheet) */
.modalOverlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.55);
  opacity:0; pointer-events:none;
  transition:opacity .15s ease;
  z-index:9000;
}
.modal{
  position:fixed;
  left:50%;
  top:74px;
  transform:translateX(-50%);
  width:min(560px, 92vw);
  max-height: calc(100vh - 110px);
  overflow:auto;
  border:1px solid var(--br);
  border-radius:var(--r);
  background:var(--panel);
  box-shadow:var(--shadow);
  padding:14px;
  opacity:0;
  pointer-events:none;
  transition:opacity .15s ease, transform .15s ease;
  z-index:9001;
}
.modal.open{ opacity:1; pointer-events:auto; transform:translateX(-50%); }
.modalOverlay.open{ opacity:1; pointer-events:auto; }
.modalHead{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px; }

.themeGrid{ display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; }
.themeSwatch{
  border:1px solid var(--br);
  border-radius:14px;
  padding:10px;
  background:rgba(255,255,255,.03);
  cursor:pointer;
  text-align:right;
}
.swTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.swDot{ width:18px; height:18px; border-radius:999px; background:var(--acc); box-shadow:0 0 18px var(--glow); }
.swName{ font-weight:900; font-size:13px; }
.swBar{ margin-top:10px; height:10px; border-radius:999px; background:linear-gradient(90deg, var(--acc), var(--acc2)); opacity:.9; }
.modalHint{ margin-top:10px; }

@media (max-width: 520px){
  .modal{ top:64px; width:92vw; max-height: calc(100vh - 90px); }
  .themeGrid{ grid-template-columns: repeat(2, 1fr); }
}

/* Song page */
.songPage{ padding:18px 0 calc(var(--miniH) + 22px); }
.songCard{
  background:rgba(255,255,255,.03);
  border:1px solid var(--br);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  overflow:hidden;
}
html[data-mode="light"] .songCard{ background:rgba(14,18,34,.03); }
.songHead{
  padding:14px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  border-bottom:1px solid var(--br);
}
.songTitle{ margin:8px 0 0; font-size:22px; }
.songBtns{ display:flex; gap:8px; flex-wrap:wrap; }
.playerBox{ padding:14px; }
#ytPlayer{
  width:100%;
  aspect-ratio:16/9;
  border-radius:14px;
  overflow:hidden;
  background:#000;
}
.rateCard, .commentsCard, .suggestCard{
  margin:0 14px 14px;
  border:1px solid var(--br);
  border-radius:var(--r);
  background:rgba(0,0,0,.10);
  padding:12px;
}
html[data-mode="light"] .rateCard,
html[data-mode="light"] .commentsCard,
html[data-mode="light"] .suggestCard{ background:rgba(14,18,34,.03); }
.rateHead, .commentsHead, .suggestHead{ display:flex; align-items:flex-end; justify-content:space-between; gap:10px; }
.rateTitle, .commentsTitle, .suggestTitle{ font-weight:900; }
.stars{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
.starBtn{
  width:42px; height:42px;
  border-radius:14px;
  border:1px solid var(--br);
  background:rgba(255,255,255,.03);
  cursor:pointer;
  display:grid; place-items:center;
  font-size:18px;
}
.starBtn.active{
  border-color: color-mix(in srgb, var(--acc) 55%, var(--br));
  box-shadow:0 0 22px var(--glow);
  background:linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
}
.cmForm{ display:grid; gap:10px; margin-top:12px; }
.cmActions{ display:flex; gap:8px; flex-wrap:wrap; }
.cmList{ margin-top:12px; display:grid; gap:10px; }
.cmItem{
  border:1px solid var(--br);
  border-radius:14px;
  background:rgba(255,255,255,.03);
  padding:10px;
}
.cmTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.cmName{ font-weight:900; font-size:13px; }
.cmTime{ color:var(--muted); font-size:12px; }
.cmText{ margin-top:8px; color:var(--txt); line-height:1.6; }
.cmDel{ padding:6px 10px; border-radius:999px; }

.suggestGrid{
  margin-top:12px;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px;
}
.sCard{
  cursor:pointer;
  border:1px solid var(--br);
  border-radius:14px;
  background:rgba(255,255,255,.03);
  overflow:hidden;
}
.sThumb{ width:100%; aspect-ratio:16/9; object-fit:cover; display:block; }
.sBody{ padding:10px; }
.sTitle{ margin:0; font-weight:900; font-size:13px; line-height:1.4; }
.sMeta{ margin-top:6px; color:var(--muted); font-size:12px; }
.songNote{ padding:0 14px 14px; }

/* Responsive */
.mobileOnly{ display:none; }
@media (max-width: 980px){
  .app{ grid-template-columns: 1fr; }
  .sidebar{ display:none; }
  .grid{ grid-template-columns: repeat(2, 1fr); }
  .mobileOnly{ display:inline-flex; }
  .suggestGrid{ grid-template-columns: repeat(2,1fr); }
}
@media (max-width: 520px){
  .grid{ grid-template-columns: 1fr; }
  .select{ width:160px; }
  .suggestGrid{ grid-template-columns: 1fr; }
    }
